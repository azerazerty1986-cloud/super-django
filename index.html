<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نكهة وجمال | ناردو برو - المتجر الذكي المتكامل 2026</title>
    
    <!-- Google Fonts - Cairo -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Chart.js للرسوم البيانية -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- Swiper للمعرض -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    
    <!-- ربط ملف CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- شاشة التحميل -->
    <div class="loader" id="loader">
        <div class="loader-spinner"></div>
    </div>

    <!-- نظام الإشعارات -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- سلة التسوق الجانبية -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3><i class="fas fa-shopping-cart"></i> سلة التسوق</h3>
            <i class="fas fa-times close-cart" onclick="toggleCart()"></i>
        </div>
        <div class="cart-items" id="cartItems"></div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>المجموع:</span>
                <span id="cartTotal">0 دج</span>
            </div>
            <button class="checkout-btn" onclick="checkoutCart()">
                <i class="fab fa-whatsapp"></i> إتمام الطلب عبر واتساب
            </button>
        </div>
    </div>

    <!-- الشريط العلوي -->
    <div class="top-bar">
        <div class="container">
            <div class="top-bar-item">
                <i class="fas fa-truck-fast"></i>
                <span>شحن مجاني للطلبات فوق 5000 دج</span>
            </div>
            <div class="top-bar-item">
                <i class="fas fa-headset"></i>
                <span>دعم VIP 24/7</span>
            </div>
            <div class="top-bar-item">
                <i class="fas fa-gem"></i>
                <span>منتجات أصلية 100%</span>
            </div>
            <div class="theme-toggle" onclick="toggleTheme()" id="themeToggle">
                <i class="fas fa-moon"></i>
                <span>ليلي</span>
            </div>
        </div>
    </div>

    <!-- الهيدر الرئيسي -->
    <header class="main-header">
        <div class="container header-content">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-leaf"></i>
                </div>
                <div class="logo-text">
                    <h1>نكهة وجمال</h1>
                    <span>ناردو برو - المتجر الذكي 2026</span>
                </div>
            </div>
            
            <!-- شريط البحث -->
            <div class="search-wrapper">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="ابحث عن منتج..." onkeyup="searchProducts()">
                    <button onclick="searchProducts()"><i class="fas fa-search"></i></button>
                </div>
            </div>
            
            <!-- أزرار الإجراءات -->
            <div class="header-actions">
                <button class="action-btn" onclick="openLoginModal()" id="userBtn">
                    <i class="far fa-user"></i>
                </button>
                <button class="action-btn" onclick="toggleCart()">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cartCounter">0</span>
                </button>
                <button class="action-btn admin-only" onclick="openDashboard()" id="dashboardBtn" style="display: none;">
                    <i class="fas fa-chart-line"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- القائمة الرئيسية -->
    <div class="container">
        <nav class="nav-menu" id="mainNav">
            <a class="nav-link active" onclick="filterProducts('all')">
                <i class="fas fa-home"></i>
                <span>الرئيسية</span>
            </a>
            <a class="nav-link" onclick="filterProducts('promo')">
                <i class="fas fa-fire"></i>
                <span>برموسيو</span>
            </a>
            <a class="nav-link" onclick="filterProducts('spices')">
                <i class="fas fa-mortar-pestle"></i>
                <span>توابل</span>
            </a>
            <a class="nav-link" onclick="filterProducts('cosmetic')">
                <i class="fas fa-spa"></i>
                <span>كوسمتيك</span>
            </a>
            <a class="nav-link" onclick="filterProducts('other')">
                <i class="fas fa-gem"></i>
                <span>منتوجات أخرى</span>
            </a>
        </nav>
    </div>

    <!-- لوحة التاجر (تظهر للتاجر فقط) -->
    <div class="container" id="merchantPanelContainer" style="display: none;"></div>

    <!-- المنتجات - شبكة 3 أعمدة -->
    <div class="container">
        <div class="products-grid" id="productsContainer"></div>
    </div>

    <!-- لوحة التحكم (للمدير فقط) -->
    <div class="container dashboard-section admin-only" id="dashboardSection" style="display: none;">
        <div class="dashboard-tabs">
            <button class="dashboard-tab active" onclick="switchDashboardTab('overview')">نظرة عامة</button>
            <button class="dashboard-tab" onclick="switchDashboardTab('orders')">الطلبات</button>
            <button class="dashboard-tab" onclick="switchDashboardTab('analytics')">التحليلات</button>
            <button class="dashboard-tab" onclick="switchDashboardTab('products')">إدارة المنتجات</button>
            <button class="dashboard-tab" onclick="switchDashboardTab('merchants')">التجار</button>
        </div>

        <div class="dashboard-content" id="dashboardContent">
            <!-- المحتوى يتم تعبئته بواسطة JavaScript -->
        </div>
    </div>

    <!-- الفوتر -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-col">
                    <h3>نكهة وجمال</h3>
                    <p><i class="fas fa-store"></i> المتجر الذكي المتكامل</p>
                    <p><i class="fas fa-star"></i> التقييم: <span id="footerRating">4.8</span>/5</p>
                </div>
                <div class="footer-col">
                    <h3>اتصل بنا</h3>
                    <p><i class="fab fa-whatsapp"></i> +213 562243648</p>
                    <p><i class="fas fa-phone"></i> 023 000 000</p>
                    <p><i class="fas fa-envelope"></i> info@nakha-wajamal.com</p>
                </div>
                <div class="footer-col">
                    <h3>تابعنا</h3>
                    <p><i class="fab fa-facebook"></i> فيسبوك</p>
                    <p><i class="fab fa-instagram"></i> انستغرام</p>
                    <p><i class="fab fa-tiktok"></i> تيك توك</p>
                </div>
                <div class="footer-col">
                    <h3>روابط سريعة</h3>
                    <p><i class="fas fa-question-circle"></i> عن المتجر</p>
                    <p><i class="fas fa-shield-alt"></i> سياسة الخصوصية</p>
                    <p><i class="fas fa-truck"></i> الشحن والتوصيل</p>
                </div>
            </div>
            <div class="copyright">
                © 2026 نكهة وجمال | ناردو برو - جميع الحقوق محفوظة
            </div>
        </div>
    </footer>

    <!-- النوافذ المنبثقة -->
    
    <!-- نافذة تسجيل الدخول -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <h2 style="text-align: center; margin-bottom: 30px;">
                <i class="fas fa-user-circle" style="color: var(--gold);"></i> تسجيل الدخول
            </h2>
            
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button class="btn-gold" style="flex: 1;" onclick="switchAuthTab('login')">تسجيل دخول</button>
                <button class="btn-outline-gold" style="flex: 1;" onclick="switchAuthTab('register')">حساب جديد</button>
            </div>

            <!-- نموذج تسجيل الدخول -->
            <form id="loginForm" onsubmit="event.preventDefault(); handleLogin();">
                <div class="form-group">
                    <label>اسم المستخدم أو البريد الإلكتروني</label>
                    <input type="text" class="form-control" id="loginEmail" value="azer" placeholder="أدخل azer">
                </div>
                <div class="form-group">
                    <label>كلمة المرور</label>
                    <input type="password" class="form-control" id="loginPassword" value="123456" placeholder="أدخل 123456">
                </div>
                <button type="submit" class="btn-gold" style="width: 100%; margin-top: 20px;">
                    <i class="fas fa-sign-in-alt"></i> دخول
                </button>
            </form>

            <!-- نموذج التسجيل -->
            <form id="registerForm" style="display: none;" onsubmit="event.preventDefault(); handleRegister();">
                <div class="form-group">
                    <label>الاسم الكامل</label>
                    <input type="text" class="form-control" id="regName" required>
                </div>
                <div class="form-group">
                    <label>البريد الإلكتروني</label>
                    <input type="email" class="form-control" id="regEmail" required>
                </div>
                <div class="form-group">
                    <label>كلمة المرور</label>
                    <input type="password" class="form-control" id="regPassword" required>
                </div>
                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 10px;">
                        <input type="checkbox" id="isMerchant" onchange="toggleMerchantFields()">
                        <span>تسجيل كتاجر</span>
                    </label>
                </div>
                
                <div id="merchantFields" style="display: none;">
                    <div class="form-group">
                        <label>مستوى التاجر</label>
                        <select class="form-control" id="merchantLevel">
                            <option value="1">المستوى الأول (5 منتجات)</option>
                            <option value="2">المستوى الثاني (10 منتجات)</option>
                            <option value="3">المستوى الثالث (15 منتج)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>وصف النشاط التجاري</label>
                        <textarea class="form-control" id="merchantDesc" rows="3"></textarea>
                    </div>
                </div>

                <button type="submit" class="btn-gold" style="width: 100%; margin-top: 20px;">
                    <i class="fas fa-user-plus"></i> تسجيل
                </button>
            </form>

            <button class="btn-outline-gold" style="width: 100%; margin-top: 15px;" onclick="closeModal('loginModal')">
                إلغاء
            </button>
        </div>
    </div>

    <!-- نافذة إضافة منتج -->
    <div class="modal" id="productModal">
        <div class="modal-content modal-lg">
            <h2 style="text-align: center; margin-bottom: 30px;">
                <i class="fas fa-plus-circle" style="color: var(--gold);"></i>
                <span id="modalTitle">إضافة منتج جديد</span>
            </h2>

            <form id="productForm" class="product-form">
                <div class="form-group">
                    <label>اسم المنتج</label>
                    <input type="text" class="form-control" id="productName" required>
                </div>

                <div class="form-group">
                    <label>القسم</label>
                    <select class="form-control" id="productCategory" required>
                        <option value="">اختر القسم</option>
                        <option value="promo">برموسيو</option>
                        <option value="spices">توابل</option>
                        <option value="cosmetic">كوسمتيك</option>
                        <option value="other">منتوجات أخرى</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>السعر (دج)</label>
                    <input type="number" class="form-control" id="productPrice" required min="0">
                </div>

                <div class="form-group">
                    <label>الكمية</label>
                    <input type="number" class="form-control" id="productStock" required min="0">
                </div>

                <div class="form-group" id="merchantSelectGroup">
                    <label>التاجر</label>
                    <select class="form-control" id="productMerchant">
                        <option value="">منتج عام</option>
                    </select>
                </div>

                <!-- رفع الصور -->
                <div class="form-group">
                    <label>صور المنتج</label>
                    <div class="image-upload-area" onclick="document.getElementById('productImages').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>اضغط لرفع الصور أو اسحبها هنا</p>
                    </div>
                    <input type="file" id="productImages" multiple accept="image/*" style="display: none;" onchange="handleImageUpload(event)">
                    <div class="image-preview" id="imagePreview"></div>
                </div>

                <input type="hidden" id="editingProductId">
                <input type="hidden" id="productImagesData">

                <div style="display: flex; gap: 15px; margin-top: 30px;">
                    <button type="button" class="btn-gold" style="flex: 2;" onclick="saveProduct()">
                        <i class="fas fa-save"></i> حفظ المنتج
                    </button>
                    <button type="button" class="btn-outline-gold" style="flex: 1;" onclick="closeModal('productModal')">
                        <i class="fas fa-times"></i> إلغاء
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- نافذة تفاصيل المنتج -->
    <div class="modal" id="productDetailModal">
        <div class="modal-content modal-lg" id="productDetailContent">
            <!-- يتم تعبئتها ديناميكياً -->
        </div>
    </div>

    <!-- ربط ملف JavaScript -->
    <script src="script.js"></script>
</body>
</html>
